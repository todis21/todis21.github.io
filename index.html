<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Tree's Blog</title><meta name="author" content="Tree"><meta name="copyright" content="Tree"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="随便都行都可以">
<meta property="og:type" content="website">
<meta property="og:title" content="Tree&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Tree&#39;s Blog">
<meta property="og:description" content="随便都行都可以">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/favicon.jfif">
<meta property="article:author" content="Tree">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/favicon.jfif"><link rel="shortcut icon" href="/img/favicon.jfif"><link rel="canonical" href="http://example.com/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Tree\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-10-19 18:02:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/bg.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.jfif" onerror="onerror=null;src='/img/404.png'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/index_img.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Tree's Blog"><span class="site-name">Tree's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Tree's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/todis21" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:3440848736@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/10/19/%E4%B8%9C%E5%8D%8E%E6%9D%AFezgadget/" title="东华杯ezgadget"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-jxl31y_2560x1440.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="东华杯ezgadget"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/19/%E4%B8%9C%E5%8D%8E%E6%9D%AFezgadget/" title="东华杯ezgadget">东华杯ezgadget</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-10-19T08:02:57.000Z" title="发表于 2023-10-19 16:02:57">2023-10-19</time></span></div><div class="content">题目分析题目给了一个jar,反编译查看
路由
public class IndexController &#123;
    @ResponseBody
    @RequestMapping(&#123;&quot;/&quot;&#125;)
    public String index(HttpServletRequest request, HttpServletResponse response) &#123;
        return &quot;index&quot;;
    &#125;

    @ResponseBody
    @RequestMapping(&#123;&quot;/readobject&quot;&#125;)
    public String unser(@RequestParam(name = &quot;data&quot;,required = true) String data, Model model) throws Exception &#123;
        byte[] b = Tools.base64Decode ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/09/15/C3P0/" title="C3P0"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/2023/image-20230915162829811.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="C3P0"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/15/C3P0/" title="C3P0">C3P0</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-09-15T06:40:10.000Z" title="发表于 2023-09-15 14:40:10">2023-09-15</time></span></div><div class="content">C3P0反序列化C3P0是一个开源的JDBC连接池，它实现了数据源和JNDI绑定，支持JDBC3规范和JDBC2的标准扩展。目前使用它的开源项目有Hibernate，Spring等
连接池类似于线程池，在一些情况下我们会频繁地操作数据库，此时Java在连接数据库时会频繁地创建或销毁句柄，增大资源的消耗。为了避免这样一种情况，我们可以提前创建好一些连接句柄，需要使用时直接使用句柄，不需要时可将其放回连接池中，准备下一次的使用。类似这样一种能够复用句柄的技术就是池技术。
环境：
&lt;dependency&gt;
    &lt;groupId&gt;com.mchange&lt;/groupId&gt;
    &lt;artifactId&gt;c3p0&lt;/artifactId&gt;
    &lt;version&gt;0.9.5.2&lt;/version&gt;
&lt;/dependency&gt;

URLClassLoader漏洞发生在com.mchange.v2.c3p0.impl.PoolBackedDataSourceBase这个类
先看看序列化writeO ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/09/13/JDBC%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="JDBC反序列化"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-739d73_2560x1440.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="JDBC反序列化"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/13/JDBC%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="JDBC反序列化">JDBC反序列化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-09-13T02:17:47.000Z" title="发表于 2023-09-13 10:17:47">2023-09-13</time></span></div><div class="content">JDBC反序列化认识JDBCJDBC（Java DataBase Connectivity）是一种用于执行Sql语句的Java Api，即Java数据库连接，是Java语言中用来规范客户端程序如何来访问数据库的应用程序接口，可以为多种关系数据库提供统一访问，提供了诸如查询和更新数据库中数据的方法，是Java访问数据库的标准规范。简单理解为链接数据库、对数据库操作都需要通过jdbc来实现。Mysql JDBC 中包含一个危险的扩展参数： “autoDeserialize”。这个参数配置为 true 时，JDBC 客户端将会自动反序列化服务端返回的数据，造成RCE漏洞。
漏洞原理若攻击者能控制JDBC连接设置项，则可以通过设置其配置指向恶意MySQL服务器触发ObjectInputStream.readObject()，构造反序列化利用链从而造成RCE。通过JDBC连接MySQL服务端时，会有几句内置的查询语句需执行，其中两个查询的结果集在MySQL客户端进行处理时会被ObjectInputStream.readObject()进行反序列化处理。如果攻击者可以控制JDBC连接设置项，那么可 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/09/11/CommonsBeanutils%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="CommonsBeanutils反序列化"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-qzmlj5_2560x1600.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="CommonsBeanutils反序列化"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/11/CommonsBeanutils%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="CommonsBeanutils反序列化">CommonsBeanutils反序列化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-09-11T02:10:00.000Z" title="发表于 2023-09-11 10:10:00">2023-09-11</time></span></div><div class="content">CommonsBeanutils反序列化CB1环境搭建：
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.javassist&lt;/groupId&gt;
        &lt;artifactId&gt;javassist&lt;/artifactId&gt;
        &lt;version&gt;3.22.0-GA&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;
        &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;
        &lt;version&gt;1.9.4&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

下图是学习CC链的时 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/09/04/Java-Agent%E5%86%85%E5%AD%98%E9%A9%AC/" title="Java Agent内存马"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-5g3zl1_1920x1080.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Java Agent内存马"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/04/Java-Agent%E5%86%85%E5%AD%98%E9%A9%AC/" title="Java Agent内存马">Java Agent内存马</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-09-04T01:48:25.000Z" title="发表于 2023-09-04 09:48:25">2023-09-04</time></span></div><div class="content">JavaAgent内存马在 jdk 1.5 之后引入了 java.lang.instrument 包，该包提供了检测 java 程序的 Api，比如用于监控、收集性能信息、诊断问题，通过 java.lang.instrument 实现的工具我们称之为 Java Agent ，Java Agent 能够在不影响正常编译的情况下来修改字节码，即动态修改已加载或者未加载的类，包括类的属性、方法
Agent 内存马的实现就是利用了这一特性使其动态修改特定类的特定方法，将我们的恶意方法添加进去
说白了 Java Agent 只是一个 Java 类而已，只不过普通的 Java 类是以 main 函数作为入口点的，Java Agent 的入口点则是 premain 和 agentmain
Java Agent 支持两种方式进行加载：
premain(了解)实现 premain 方法，在启动时进行加载 （该特性在 jdk 1.5 之后才有）
首先创建一个demo
package org.example;
import java.lang.instrument.Instrumentation;
publ ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/08/28/Tomcat%E5%86%85%E5%AD%98%E9%A9%AC/" title="Tomcat内存马"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-1p2jl1_2560x1440.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Tomcat内存马"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/08/28/Tomcat%E5%86%85%E5%AD%98%E9%A9%AC/" title="Tomcat内存马">Tomcat内存马</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-08-28T13:12:37.000Z" title="发表于 2023-08-28 21:12:37">2023-08-28</time></span></div><div class="content">Tomcat内存马


Servlet内存马下面是基于动态注册Servlet的内存马实现
首先要了解Servlet是如何被注册的，注册的过程是怎样的。按照正常的实现Servlet，是需要在web.xml里面进行配置的，如：
&lt;servlet&gt;
  &lt;servlet-name&gt;Test&lt;/servlet-name&gt;
  &lt;servlet-class&gt;Test&lt;/servlet-class&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;Test&lt;/servlet-name&gt;
  &lt;url-pattern&gt;/test&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

要实现动态注册，那就要先去了解这个web.xml是如何被解析并且获取servlet的
解析web.xml的类是org.apache.catalina.startup.ContextConfig的webConfig()方法这个 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/08/21/Tomcat%E7%B3%BB%E5%88%97/" title="Tomcat系列"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-l8j592_2560x1440.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Tomcat系列"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/08/21/Tomcat%E7%B3%BB%E5%88%97/" title="Tomcat系列">Tomcat系列</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-08-21T06:41:18.000Z" title="发表于 2023-08-21 14:41:18">2023-08-21</time></span></div><div class="content">Tomcat系列简介Tomcat是由Apache软件基金会下属的Jakarta项目开发的一个Servlet容器，按照Sun Microsystems提供的技术规范，实现了对Servlet和JavaServer Page（JSP）的支持，并提供了作为Web服务器的一些特有功能，如Tomcat管理和控制平台、安全域管理和Tomcat阀等。Tomcat 很受广大程序员的喜欢，因为它运行时占用的系统资源小，扩展性好，支持负载平衡与邮件服务等开发应用系统常用的功能。
环境下载：https://archive.apache.org/dist/tomcat/
CVE-2017-12615(任意文件写入)影响范围： Apache Tomcat 7.0.0 - 7.0.79   Apache Tomcat 8.5.19
环境搭建：这里使用的是vulhub的环境，其中的conf/web.xml如下：
&lt;servlet&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.apache ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/08/15/Fastjson%E7%B3%BB%E5%88%97/" title="Fastjson系列"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/wallhaven-85965k_1920x1080.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Fastjson系列"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/08/15/Fastjson%E7%B3%BB%E5%88%97/" title="Fastjson系列">Fastjson系列</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-08-15T08:46:08.000Z" title="发表于 2023-08-15 16:46:08">2023-08-15</time></span></div><div class="content">FastJson系列前置知识环境搭建：
    &lt;dependency&gt;
      &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
      &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
      &lt;version&gt;1.2.24&lt;/version&gt;
    &lt;/dependency&gt;

如果无法下载源码使用下面命令：
mvn dependency:resolve -Dclassifier=sources

序列化先写一个javabean:
package org.example;

public class user &#123;
    private String name;
    private int age;

    public user() &#123;
        System.out.println(&quot;调用构造函数&quot;);
    &#125;

    public String getName() &# ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/08/02/Laravel%E6%BC%8F%E6%B4%9E%E5%90%88%E9%9B%86/" title="Laravel漏洞合集"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/wallhaven-5gm5p5_2560x1440.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Laravel漏洞合集"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/08/02/Laravel%E6%BC%8F%E6%B4%9E%E5%90%88%E9%9B%86/" title="Laravel漏洞合集">Laravel漏洞合集</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-08-02T13:51:54.000Z" title="发表于 2023-08-02 21:51:54">2023-08-02</time></span></div><div class="content">Laravel漏洞合集SQL注入(ignore)漏洞描述：
该漏洞存在于Laravel的表单验证功能，漏洞函数为ignore()，漏洞文件位于&#x2F;vendor&#x2F;laravel&#x2F;ramework&#x2F;src&#x2F;Illuminate&#x2F;Validation&#x2F;Rules&#x2F;Unique.php。有时候开发者希望在进行字段唯一性验证时忽略指定字段以及字段值，通常会调用Rule类的ignore方法。该方法有两个参数，第一个参数为字段值，第二个参数为字段名，当字段名为空时，默认字段名为“id”。如果用户可以控制ignore()方法的参数值，就会产生SQL注入漏洞。漏洞影响版本&lt;&#x3D;5.8.5
查看官方修改：


发现在ignore值获取的过程中添加了addslashes()过滤
测试环境搭建：
新建一个控制器：\app\Http\Controllers\TestController.php
&lt;?php
namespace App\Http\Controllers;
use Illuminate\Http\Req ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/08/02/Commons-Collections%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E9%93%BE%E5%90%88%E9%9B%86/" title="Commons-Collections反序列化链合集"><img class="post-bg" src="https://raw.githubusercontent.com/todis21/image/main/wallhaven-j3eemp_2560x1440.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Commons-Collections反序列化链合集"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/08/02/Commons-Collections%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E9%93%BE%E5%90%88%E9%9B%86/" title="Commons-Collections反序列化链合集">Commons-Collections反序列化链合集</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-08-02T13:45:38.000Z" title="发表于 2023-08-02 21:45:38">2023-08-02</time></span></div><div class="content">Commons-Collections利用链合集前置知识
java反射

javassist

动态代理

JVM类加载机制


CC1版本：cc3.1～3.2.1
jdk: &lt; 8u71
环境搭建：
&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;commons-collections&lt;/groupId&gt;
            &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;
            &lt;version&gt;3.1&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

对比官方在3.2.2版本https://github.com/apache/commons-collections/commit/1642b00d67b96de87cad44223efb9ab5b4fb7be5

默认情况下禁用 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/favicon.jfif" onerror="this.onerror=null;this.src='/img/404.png'" alt="avatar"/></div><div class="author-info__name">Tree</div><div class="author-info__description">随便都行都可以</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/todis21"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/todis21" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:3440848736@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/10/19/%E4%B8%9C%E5%8D%8E%E6%9D%AFezgadget/" title="东华杯ezgadget"><img src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-jxl31y_2560x1440.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="东华杯ezgadget"/></a><div class="content"><a class="title" href="/2023/10/19/%E4%B8%9C%E5%8D%8E%E6%9D%AFezgadget/" title="东华杯ezgadget">东华杯ezgadget</a><time datetime="2023-10-19T08:02:57.000Z" title="发表于 2023-10-19 16:02:57">2023-10-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/15/C3P0/" title="C3P0"><img src="https://raw.githubusercontent.com/todis21/image/main/2023/image-20230915162829811.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="C3P0"/></a><div class="content"><a class="title" href="/2023/09/15/C3P0/" title="C3P0">C3P0</a><time datetime="2023-09-15T06:40:10.000Z" title="发表于 2023-09-15 14:40:10">2023-09-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/13/JDBC%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="JDBC反序列化"><img src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-739d73_2560x1440.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="JDBC反序列化"/></a><div class="content"><a class="title" href="/2023/09/13/JDBC%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="JDBC反序列化">JDBC反序列化</a><time datetime="2023-09-13T02:17:47.000Z" title="发表于 2023-09-13 10:17:47">2023-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/11/CommonsBeanutils%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="CommonsBeanutils反序列化"><img src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-qzmlj5_2560x1600.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="CommonsBeanutils反序列化"/></a><div class="content"><a class="title" href="/2023/09/11/CommonsBeanutils%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="CommonsBeanutils反序列化">CommonsBeanutils反序列化</a><time datetime="2023-09-11T02:10:00.000Z" title="发表于 2023-09-11 10:10:00">2023-09-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/04/Java-Agent%E5%86%85%E5%AD%98%E9%A9%AC/" title="Java Agent内存马"><img src="https://raw.githubusercontent.com/todis21/image/main/2023/wallhaven-5g3zl1_1920x1080.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Java Agent内存马"/></a><div class="content"><a class="title" href="/2023/09/04/Java-Agent%E5%86%85%E5%AD%98%E9%A9%AC/" title="Java Agent内存马">Java Agent内存马</a><time datetime="2023-09-04T01:48:25.000Z" title="发表于 2023-09-04 09:48:25">2023-09-04</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/DC%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/" style="font-size: 1.42em; color: #99a6b7">DC靶场系列</a> <a href="/tags/%E5%86%85%E5%AD%98%E9%A9%AC/" style="font-size: 1.18em; color: #999ca1">内存马</a> <a href="/tags/ctf/" style="font-size: 1.18em; color: #999ca1">ctf</a> <a href="/tags/%E4%BF%A1%E5%AE%89%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/" style="font-size: 1.1em; color: #999">信安数学基础</a> <a href="/tags/web/" style="font-size: 1.26em; color: #999fa8">web</a> <a href="/tags/PHP/" style="font-size: 1.26em; color: #999fa8">PHP</a> <a href="/tags/Java/" style="font-size: 1.5em; color: #99a9bf">Java</a> <a href="/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" style="font-size: 1.42em; color: #99a6b7">漏洞复现</a> <a href="/tags/CTF/" style="font-size: 1.1em; color: #999">CTF</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F/" style="font-size: 1.34em; color: #99a3b0">网络渗透</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">52</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-10-19T10:02:05.842Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Tree</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@undefined/dist/mermaid.min.js?v=undefined"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}</script></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["没有选择会是唯一的路","解决不了问题就解决提出问题的人"])
  } else {
    document.getElementById("subtitle").textContent = "没有选择会是唯一的路"
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="喵" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>